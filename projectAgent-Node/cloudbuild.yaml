steps:
  # Install dependencies
  - name: 'gcr.io/cloud-builders/npm'
    args: ['ci']

  # Build the application
  - name: 'gcr.io/cloud-builders/npm'
    args: ['run', 'build']

# Specify the images to be pushed to the Container Registry  
images:
  - >-
    $_AR_HOSTNAME/$_AR_PROJECT_ID/$_AR_REPOSITORY/$REPO_NAME/$_SERVICE_NAME:$COMMIT_SHA
options:
  substitutionOption: ALLOW_LOOSE
  logging: CLOUD_LOGGING_ONLY
substitutions:
  _TRIGGER_ID: db11c651-3950-4bbe-b0cc-93315b081389
  _AR_REPOSITORY: cloud-run-source-deploy
  _AR_PROJECT_ID: focal-dolphin-464823-s3
  _PLATFORM: managed
  _SERVICE_NAME: approve-edit-disapprove
  REPO_NAME: projectagent
  _DEPLOY_REGION: europe-west1
  _AR_HOSTNAME: europe-west1-docker.pkg.dev
tags:
  - gcp-cloud-build-deploy-cloud-run
  - gcp-cloud-build-deploy-cloud-run-managed
  - approve-edit-disapprove
